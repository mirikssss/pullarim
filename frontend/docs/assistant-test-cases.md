# Тест-кейсы AI ассистента Pullarim

## Проверки
- Все цифры только из tools (никаких выдуманных)
- exclude_from_budget=false и category!=transfers по умолчанию
- Таблицы отформатированы markdown
- Максимум 1 эмодзи на ответ
- Формат: [Главный вывод] → [Цифры] → [Конкретный шаг]
- Запрещено: "старайтесь", "рекомендуем быть внимательнее", общие советы без данных

## Сценарии для проверки

### Большие разовые траты
- Данные: одна операция >200k или clothes/shopping >300k
- Ожидание: ассистент выделяет отдельно "С покупкой X" / "Без покупки X"
- Не должен: считать разовую трату в дневной лимит

### Много transfers
- Данные: >30% операций — transfers
- Ожидание: share_transfers в ответе, анализ без переводов
- Не должен: включать переводы в "сколько потратил"

### Пустые категории
- Данные: по некоторым категориям 0
- Ожидание: не выдумывать траты, сказать "нет данных"
- Не должен: приписывать нули как факт без проверки

### Смешанный месяц (смена зарплаты)
- Данные: salary_mode с end_date в середине месяца
- Ожидание: корректный прогноз 20-го и 5-го
- Не должен: путать breakdown по режимам

### Дефицит бюджета до ЗП
- Данные: avg_spend * days_until_next > current_balance_estimate
- Ожидание: предупреждение о дефиците, конкретный совет
- Не должен: мотивашки "будьте внимательнее"

## Примеры запросов

### 1. "Сколько потратил вчера?"
- Ожидание: get_spending_summary или get_spending_insights с range=yesterday
- Ответ: итог за вчера, без выдуманных сумм

### 2. "На что больше всего ушло за 15 дней?"
- Ожидание: get_spending_insights с range=15d
- Ответ: топ 2 категории, топ 2 мерчанта, 1 вывод, 1 совет

### 3. "Сделай бюджет на 12 дней, хочу уложиться в 1м"
- Ожидание: get_spending_insights (14d для средней), расчёт 1_000_000/12
- Ответ: цель 83_333/день, средняя за 14 дней, где перерасход, лимиты по категориям, блок "разовые" отдельно

### 4. "Когда следующая выплата и сколько?"
- Ожидание: get_salary_context
- Ответ: дата следующей выплаты, прогноз суммы, последняя выплата

### 5. "Вот у меня много переводов, не учитывай их"
- Ожидание: get_spending_insights с includeExcluded=false (по умолчанию)
- Ответ: анализ без переводов

### 6. "Добавь расход 12 000 такси yandex сегодня"
- Ожидание: create_expense amount=12000, merchant="yandex", category_id=resolve_category("такси")
- Ответ: подтверждение добавления

### 7. "Сколько получено с 5 янв 2026?"
- Ожидание: get_salary_context с from=2026-01-05
- Ответ: ytd_received за период

### 8. "Что такое Korzinka и YandexGo?"
- Ожидание: resolve_merchants_help с merchants=["Korzinka","YandexGo"]
- Ответ: Korzinka=продукты, YandexGo=такси

### 9. "Топ мерчантов за неделю"
- Ожидание: get_spending_insights range=7d
- Ответ: top_merchants с суммами

### 10. "Дай идеи как сэкономить"
- Ожидание: get_spending_insights, temperature=0.7 (creative)
- Ответ: советы на основе фактов, 1 уточняющий вопрос если не хватает данных
